# AETHER Gradio Web界面使用指南

## 🚀 快速启动

### 方式1: 使用启动脚本（推荐）

```bash
cd /Users/chenguowen/Downloads/Z-Image
./start_gradio.sh
```

### 方式2: 手动启动

```bash
cd /Users/chenguowen/Downloads/Z-Image
source .venv/bin/activate
python gradio_app.py
```

## 📋 界面功能

### 左侧控制面板

1. **提示词输入框**
   - 输入你想要生成的图像描述
   - 支持中英文提示词

2. **决议类别**
   - 选择基础分辨率：1024, 768, 512
   - 会自动更新可用的分辨率选项

3. **宽度 x 高度 (比例)**
   - 选择具体的分辨率
   - 支持1:1、2:1、1:2等比例

4. **种子设置**
   - **种子**: 指定随机种子值（相同种子生成相同图像）
   - **随机种子**: 勾选后每次生成使用随机种子

5. **步骤**
   - 推理步数，默认8步
   - 更多步数通常质量更好但速度更慢
   - 范围：1-50

6. **产生按钮**
   - 点击开始生成图像

7. **所用种子**
   - 显示本次生成实际使用的种子值

8. **示例提示词**
   - 点击示例按钮快速填充提示词

### 右侧显示区域

- **生成的图像**: 显示生成的图像结果
- **状态**: 显示生成状态和错误信息

## ⚙️ 使用示例

### 示例1: 生成默认图像

1. 在提示词框中输入："一位优雅的中国女子，红色汉服，精美的刺绣"
2. 保持默认设置（1024x1024，8步）
3. 点击"产生"按钮
4. 等待生成完成（通常30秒-2分钟）

### 示例2: 使用示例提示词

1. 点击"示例 1"按钮
2. 提示词会自动填充
3. 点击"产生"按钮

### 示例3: 使用固定种子生成相同图像

1. 取消勾选"随机种子"
2. 设置种子值为 42
3. 输入提示词并生成
4. 下次使用相同种子和提示词会生成相同图像

## 🔧 高级设置

### 分辨率建议

- **1024x1024 (1:1)**: 最佳质量，适合大多数场景
- **1024x512 (2:1)**: 横向图像，适合风景
- **512x1024 (1:2)**: 纵向图像，适合人像

### 步骤数建议

- **8步**: 默认，速度快，质量好（推荐）
- **10-15步**: 更好质量，稍慢
- **20+步**: 最高质量，但速度较慢

### 性能优化

- 较低分辨率（512x512）生成更快
- 较少步数（4-8步）生成更快
- 1024x1024在Metal加速下通常需要30秒-2分钟

## 🌐 访问界面

启动后，界面会在以下地址打开：

- **本地访问**: http://localhost:7860
- **局域网访问**: http://你的IP地址:7860

## ⚠️ 故障排除

### 问题1: 无法启动

**错误**: "找不到 sd 可执行文件"

**解决**: 
```bash
cd stable-diffusion.cpp
mkdir -p build && cd build
cmake .. && cmake --build . --config Release
```

### 问题2: 找不到模型文件

**错误**: "未找到模型文件 z_image_turbo-Q4_K_M.gguf"

**解决**: 确保GGUF模型文件在项目根目录

### 问题3: 找不到VAE文件

**错误**: "未找到VAE文件 ae.safetensors"

**解决**: 
1. 从 https://huggingface.co/black-forest-labs/FLUX.1-dev 下载
2. 将文件保存为 `ae.safetensors` 并放置在项目根目录

### 问题4: 生成失败

**检查**:
- 提示词不能为空
- 确保所有必需文件存在
- 检查终端中的错误信息

### 问题5: 生成速度慢

**优化**:
- 降低分辨率（如512x512）
- 减少推理步数（如4-6步）
- 确保Metal加速已启用（macOS自动启用）

## 📝 注意事项

1. **首次生成较慢**: 第一次运行时需要加载模型，可能需要1-2分钟
2. **内存使用**: 生成过程中会占用约8-10GB内存
3. **并发生成**: 建议一次只生成一张图像
4. **输出文件**: 生成的图像保存在 `./output/` 目录

## 🔗 相关文档

- [GGUF使用指南](./GGUF_USAGE.md)
- [README](./README.md)
- [stable-diffusion.cpp文档](https://github.com/leejet/stable-diffusion.cpp)

